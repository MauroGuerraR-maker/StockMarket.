<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Editar Producto</title>
<style>
body {
    font-family: Arial, sans-serif;
    background-color: #2f2f2f;
    background-image: url('https://images.unsplash.com/photo-1549887534-3ec93abae07b?fit=crop&w=1920&q=80');
    background-size: cover;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    height:100vh;
}
.container {
    background-color: rgba(255, 255, 255, 0.95);
    padding: 30px;
    border-radius: 12px;
    color: #333;
    max-width: 500px;
    width:100%;
}
h2 {
    color: #007bff;
}
input, textarea {
    width:100%;
    padding:10px;
    margin:8px 0;
    border-radius:6px;
    border:1px solid #ccc;
    resize: vertical;
}
button {
    padding:10px 20px;
    background-color: #007bff;
    color:white;
    border:none;
    border-radius:6px;
    cursor:pointer;
}
button:hover {
    background-color:#0056b3;
}
.flash {
    padding:10px;
    margin:10px 0;
    border-radius:5px;
}
.flash-success {
    background-color:#d4edda;
    color:#155724;
}
.flash-error {
    background-color:#f8d7da;
    color:#721c24;
}
</style>
</head>
<body>
<div class="container">
    <h2>Editar Producto: {{ producto.nombre }}</h2>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="flash flash-{{ category }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <!-- IMPORTANTE: enctype="multipart/form-data" -->
    <form method="POST" enctype="multipart/form-data">
        <input type="text" name="nombre" value="{{ producto.nombre }}" required />
        <textarea name="descripcion" required>{{ producto.descripcion }}</textarea>
        <input type="number" name="cantidad" value="{{ producto.cantidad }}" required />
        <input type="number" step="0.01" name="precio" value="{{ producto.precio }}" required />
        <label>Imagen (opcional):</label>
        <input type="file" name="imagen" />
        {% if producto.imagen_url %}
            <p><img src="{{ producto.imagen_url }}" alt="Imagen actual" style="max-width:200px; border-radius:6px;"></p>
        {% endif %}
        <button type="submit">Guardar Cambios</button>
    </form>

    <a href="{{ url_for('inventario') }}" style="display:block;margin:15px 0;text-align:center;">
        ‚Üê Volver al inventario
    </a>
</div>
</body>
</html>
